# Makefile for the socket programming example
#
#VPATH = src/
#LIBRARYDIRS = ./src/
simple_server_objects = ServerSocket.o Socket.o simple_server_main.o
simple_client_objects = ClientSocket.o Socket.o simple_client_main.o
CCFLAGS = -g -Wall -O0
INCLUDE = -Iheaders/   

IR_INC = ./include
DIR_SRC = ./src
DIR_OBJ = ./obj
DIR_BIN = ./bin

SRC = $(wildcard ${DIR_SRC}/*.c)  
OBJ = $(patsubst %.c,${DIR_OBJ}/%.o,$(notdir ${SRC})) 

#LIBS = -Lsrc/
GCC = /usr/bin/g++


TARGET = simple_server 

BIN_TARGET = ${DIR_BIN}/${TARGET}
BIN_CLIENT_TARGET = ${DIR_BIN}/simple_client

all : $(BIN_TARGET) $(BIN_CLIENT_TARGET) 

$(BIN_TARGET): $(simple_server_objects)
	$(GCC) -o   $@  $(simple_server_objects) $(INCLUDE) 


$(BIN_CLIENT_TARGET): $(simple_client_objects)
	$(GCC) -o   $@ $(simple_client_objects) $(INCLUDE) 

Socket.o: Socket.cpp
	$(GCC)  -c Socket.cpp  $(INCLUDE) 
ServerSocket.o: ServerSocket.cpp
	$(GCC)  -c ServerSocket.cpp  $(INCLUDE)  
ClientSocket.o: ClientSocket.cpp
	$(GCC)  -c ClientSocket.cpp  $(INCLUDE) 
simple_server_main.o: simple_server_main.cpp
	$(GCC)   -c simple_server_main.cpp $(INCLUDE) 
simple_client_main.o: simple_client_main.cpp
	$(GCC)   -c simple_client_main.cpp $(INCLUDE) 

.PHONY:clean
clean:
	#find . -name *.o -exec rm -rf {} \;
	rm -f *o 
